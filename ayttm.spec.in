Summary: 	A Universal Instant Messaging Client 
Name: 		@PACKAGE@
Version: 	@VERSION@
Release:	@RELEASE@
Group: 		Applications/Internet
License: 	GPL
URL: 		http://ayttm.sourceforge.net
Source: 	%{name}-%{version}.tar.bz2
Buildroot: 	%{_tmppath}/%{name}-%{version}-%{release}-root
Requires:	@REQUIRES@

# If you want stripped RPM with no crash dialog use
# --define "nodebug 1" in rpmbuild commandline
%if "%{nodebug}" != "1"
%define nodebug 0
%endif

%description
Ayttm is designed to become a Universal Instant Messaging client, seamlessly
integrating all existing Instant Messaging clients and providing a single
consistant user interface. Currently, Ayttm supports sending and receiving
messages through AOL, ICQ, Yahoo, MSN, IRC and Jabber.

%if "%{nodebug}" == "0"
%define optflags -g
%define __spec_install_post %{_libdir}/rpm/brp-compress 
%endif

%define debug_package %{nil}

%prep
%setup 

%build
%if "%{nodebug}" == "0"
%configure --enable-smtp --enable-jasper-filter
%else
%configure --disable-crash-dialog --enable-smtp --enable-jasper-filter
%endif
make

%install
rm -rf $RPM_BUILD_ROOT
make DESTDIR=$RPM_BUILD_ROOT install

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root)
# Install documentation.
%doc COPYING AUTHORS README ChangeLog
# Install man page.
%{_mandir}/man*/*
# Icons and sounds
%{_datadir}/pixmaps/ayttm.png
%{_datadir}/@PACKAGE@/sounds/*
%{_datadir}/@PACKAGE@/smileys/*
# Red Hat menu (doesn't do any damage on other distros)
%{_datadir}/gnome/apps/Internet/@PACKAGE@.desktop
%{_datadir}/applnk/Internet/@PACKAGE@.desktop
# Install the modules
%{_libdir}/@PACKAGE@/*.la  
%{_libdir}/@PACKAGE@/*.so 
# Install translations
%{_datadir}/locale/*/LC_MESSAGES/@PACKAGE@.mo
# the config file
%config(noreplace) /etc/ayttmrc
# Lastly, the binary itself
%{_bindir}/ayttm_streamer_wrapper.sh
%{_bindir}/@PACKAGE@

%changelog
@CHANGELOG@

